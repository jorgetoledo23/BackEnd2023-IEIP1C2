@using System.Globalization
@model ICollection<Producto>

@{
    Layout = "_Layout";
}

<p>
        <a class="btn btn-outline-success" asp-action="Create"><i class="bi bi-plus-circle mx-2"></i>Agregar Nuevo Producto</a>
</p>

<div class="row justify-content-start">
    @foreach (var item in Model)
    {
        <div class="card text-center m-2" style="width: 18rem;">

            @{
                var id = String.Concat("Item", item.Id);
            }
            <div id="@id" class="carousel slide">
                <div class="carousel-inner">
                    @{
                        var count = 1;}
                    @foreach (var img in item.Imagenes)
                    {
                        
                        
                        if(count == 1){
                            <div class="carousel-item active">
                                <img src="@img.ImgUrl" class="d-block w-100" alt="...">
                            </div>
                        }else{
                            <div class="carousel-item">
                                <img src="@img.ImgUrl" class="d-block w-100" alt="...">
                            </div>
                        }

                        count++;
                    }
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#@id" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#@id" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
            <div class="card-body">
                <h5 class="card-title">@item.Nombre</h5>
                <h6 class="card-title">@item.Descripcion</h6>
                <h4 class="card-title">@item.Precio.ToString("C", new CultureInfo("es-CL"))</h4>
                <h6 class="card-title">Disponibilidad <strong>@item.Stock</strong></h6>
                    <a asp-controller="Productos" asp-action="EditarProducto" asp-route-IdProducto="@item.Id" ><i class="bi bi-pencil-square mx-2"></i></a>
                    <a onclick="return confirm('¿Estas Seguro?')"
                        asp-controller="Productos" asp-action="EliminarProducto" asp-route-IdProducto="@item.Id"><i class="bi bi-trash2 mx-2"></i></a>
            </div>
        </div>
    }
</div>

